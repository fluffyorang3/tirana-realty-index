<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Tirana Realty Index</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <h1>Tirana Realty Index</h1>
    <canvas id="chart-overall"></canvas>
    <h2>Neighborhoods</h2>
    <ul id="neigh-list"></ul>

    <script>
      fetch("data/series_overall.json")
        .then((r) => r.json())
        .then((data) => {
          new Chart(document.getElementById("chart-overall"), {
            type: "line",
            data: {
              labels: data.map((p) => p.date),
              datasets: [
                {
                  label: "Avg €/m²",
                  data: data.map((p) => p.value),
                  tension: 0.3,
                },
              ],
            },
          });
        });
      fetch("data/series_by_neighborhood.json")
        .then((r) => r.json())
        .then((obj) => {
          const ul = document.getElementById("neigh-list");
          Object.keys(obj).forEach((nb) => {
            const li = document.createElement("li");
            li.innerHTML = `<a href="neighborhood.html?nb=${encodeURIComponent(
              nb
            )}">${nb}</a>`;
            ul.appendChild(li);
          });
        });
    </script>
  </body>
</html>
